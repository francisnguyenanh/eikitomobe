{% extends "baseall.html" %}

{% block title %}Tome Game{% endblock %}

{% block extra_head %}
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
        
        .card, .modal-content, .table {
            background-color: var(--card-bg);
            color: var(--text-color);
        }
        .navbar, .navbar .navbar-brand, .navbar .nav-link {
            background-color: var(--card-bg) !important;
            color: var(--text-color) !important;
        }
        .container.py-4 {
            padding-left: 0 !important;
        }
    </style>
{% endblock %}

{% block navbar_content %}
    <a class="navbar-brand" href="/home">Game</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('game_flip') }}">
                    <i class="bi bi-grid-3x3-gap"></i> Lật hình
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{{ url_for('game_math') }}">
                    <i class="bi bi-calculator"></i> Tính toán
                </a>
            </li>
        </ul>
    </div>
{% endblock %}

{% block content %}
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    {% block page_content %}{% endblock %}
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(function() {
            document.querySelectorAll('.alert').forEach(function(alert) {
                if (typeof bootstrap !== 'undefined' && bootstrap.Alert) {
                    var bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
                    bsAlert.close();
                } else {
                    alert.remove();
                }
            });
        }, 3000);

        // Đóng navbar khi click ra ngoài (mobile)
        document.addEventListener('click', function(event) {
            const navbarCollapse = document.getElementById('navbarNav');
            const navbarToggler = document.querySelector('.navbar-toggler');
            if (navbarCollapse && navbarToggler && navbarCollapse.classList.contains('show')) {
                if (
                    !navbarCollapse.contains(event.target) &&
                    !navbarToggler.contains(event.target)
                ) {
                    new bootstrap.Collapse(navbarCollapse).hide();
                }
            }
        });
    });
</script>
{% endblock %}
